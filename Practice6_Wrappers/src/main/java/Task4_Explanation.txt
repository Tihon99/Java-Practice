В Java для оптимизации памяти используется кеширование часто используемых значений Integer в диапазоне от -128 до 127 в классе IntegerCache.

Когда создаются объекты Integer со значениями в этом диапазоне (как i2 = 127), Java использует уже существующие объекты из кеша. Поэтому a2 и b2 указывают на один и тот же объект в памяти, и сравнение == возвращает true.

Для значений вне этого диапазона (как i1 = 128) создаются новые объекты. Поэтому a1 и b1 - это разные объекты в памяти, и сравнение == возвращает false.

Метод equals() всегда сравнивает значения, а не ссылки, поэтому он возвращает true для равных значений независимо от того, кешированы они или нет.
